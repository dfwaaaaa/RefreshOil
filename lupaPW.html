<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lupa Password - RefreshOil</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="lupaPW.css">
</head>
<body>
    <div class="background"></div>
    <button class="back-button"></button>
    
    <div class="login-container">
        <div class="logo">
            <img src="/gambar/logo.png" alt="RefreshOil Logo">
        </div>

        <form id="reset-password-form">
            <p>Bikin password baru yuk!</p>
            <div class="input-group">
                <div class="password-container">
                    <input type="password" class="input-field" placeholder="Masukkan password baru" id="new-password" required>
                    <span class="toggle-password" data-target="new-password">ðŸ˜ƒ</span>
                </div>
                <div class="password-container">
                    <input type="password" class="input-field" placeholder="Konfirmasi Password" id="confirm-password" required>
                    <span class="toggle-password" data-target="confirm-password">ðŸ˜ƒ</span>
                </div>
                <p class="error-message" id="error-message">Password tidak sesuai!</p>
            </div>
            <button type="submit" class="login-button">Konfirmasi</button>
        </form>

        <script>
            const resetPasswordForm = document.getElementById("reset-password-form");
            const newPassword = document.getElementById("new-password");
            const confirmPassword = document.getElementById("confirm-password");
            const errorMessage = document.getElementById("error-message");
            const togglePasswordButtons = document.querySelectorAll(".toggle-password");
            const inputs = document.querySelectorAll(".input-field");
            const loginButton = document.querySelector(".login-button");
        
            // Fungsi untuk toggle tipe password
            togglePasswordButtons.forEach(button => {
                button.addEventListener("click", () => {
                    const target = document.getElementById(button.getAttribute("data-target"));
                    const type = target.getAttribute("type") === "password" ? "text" : "password";
                    target.setAttribute("type", type);
                    button.textContent = type === "password" ? "ðŸ˜ƒ" : "ðŸ˜Š";
                });
            });
        
            // Tangani event submit pada form
            resetPasswordForm.addEventListener("submit", (event) => {
                event.preventDefault(); // Cegah pengiriman formulir default
        
                if (newPassword.value === confirmPassword.value) {
                    // Password cocok, arahkan ke halaman sukses
                    alert("Password berhasil diubah!");
                    window.location.href = "login.html";
                } else {
                    // Password tidak cocok, tampilkan pesan kesalahan
                    confirmPassword.classList.add("error");
                    errorMessage.style.display = "block";
                }
            });
        
            // Fungsi untuk memeriksa apakah semua input terisi
            function checkInputs() {
                const allFilled = Array.from(inputs).every(input => input.value.trim() !== "");
                if (allFilled) {
                    loginButton.style.backgroundColor = "#FFD700"; // Warna kuning
                    loginButton.style.color = "#333"; // Warna teks gelap
                } else {
                    loginButton.style.backgroundColor = "white"; // Warna putih
                    loginButton.style.color = "#666"; // Warna teks abu-abu
                }
            }
        
            // Hapus pesan kesalahan saat pengguna mulai mengetik
            confirmPassword.addEventListener("input", () => {
                confirmPassword.classList.remove("error");
                errorMessage.style.display = "none";
            });
        
            // Tambahkan event listener ke semua input
            inputs.forEach(input => {
                input.addEventListener("input", checkInputs);
            });
        </script>        
</body>
</html>